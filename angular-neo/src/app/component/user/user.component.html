<div class="container">

  <form class="form" [formGroup]="formGroup">
    <div class="row">
      <div class="col-md-6 col-12">
        <div class="form-group">
          <label for="first-name-column" class="mt-2">Name</label>
          <input
            type="text"
            formControlName="name"
            id="first-name-column"
            class="form-control mt-2"
            placeholder="Name"
            name="fname-column"
          />
        </div>
      </div>
      <div class="col-md-6 col-12">
        <div class="form-group">
          <label for="last-name-column" class="mt-2">Email</label>
          <input
            type="text"
            id="last-name-column"
            formControlName="email"
            class="form-control mt-2"
            placeholder="Email"
            name="lname-column"
          />
        </div>
      </div>
      <div class="col-md-6 col-12">
        <div class="form-group">
          <label for="country-floating" class="mt-2">Age</label>
          <input
            type="number"
            id="country-floating"
            formControlName="age"
            class="form-control mt-2"
            name="country-floating"
            placeholder="Age"
          />
        </div>
      </div>
      <div class="col-md-6 col-12">
        <div class="form-group">
          <label class="mt-2">Gender</label>
          <select formControlName="sex" class="form-control mt-2">
            <option value="1" selected>Nam</option>
            <option value="0">Nữ</option>
          </select>
        </div>
      </div>
      <div class="col-md-4 col-12">
        <div class="form-group">
          <label  class="mt-2">City</label>
          <select class="form-control mt-2" [(ngModel)]="province_code" (ngModelChange)="getProvince()" >
            <option disabled selected >Chọn Tỉnh/Thành phố</option>
            <option *ngFor="let data of city" value="{{data.id}}">  {{ data.name }}</option>
          </select>
        </div>
      </div>
      <div class="col-md-4 col-12">
        <div class="form-group">
          <label class="mt-2">District</label>
          <select class="form-control mt-2" >
            <option selected disabled > Chọn Quận/Huyện</option>
            <ng-container *ngFor="let district of district">
            <option *ngIf="district.provinceId == province_code">  {{ district.name }}</option>
            </ng-container>
          </select>
        </div>
      </div>
      <div class="col-md-4 col-12">
        <div class="form-group">
          <label class="mt-2">Wards</label>
          <select class="form-control mt-2">
            <option disabled selected>Chọn Xã/Phường</option>
            <option *ngFor="let ward of wards">  {{ ward.name }}</option>
          </select>
        </div>
      </div>
      <div class="col-12">
        <div class="form-group">
          <label for="address" class="mt-2">Address</label>
          <textarea
            id="address"
            rows="3"
            class="form-control mt-2"
            name="address"
            formControlName="address"
            placeholder="Address"
          ></textarea>
        </div>
      </div>
      <div class="col-12">
        <button type="submit" (click)="AddOrUpdate()"  class="btn btn-primary mr-1 mt-3">Submit</button>

        <button type="reset" rippleEffect class="btn btn-outline-secondary mt-3">Reset</button>
      </div>
    </div>
  </form>

  <div class="row mt-3 mb-3 d-flex justify-content-start" id="list-item-2">
    <div class="col-1">
      <select class="form-control"[(ngModel)]="basicSelectedOption">
        <option value="2">2</option>
        <option value="5">5</option>
        <option value="10">10</option>
        <option value="15">15</option>
      </select>
    </div>
    <div class="col-5">
      <input
        [(ngModel)]="searchName"
        (keydown.enter)="checkSearch()"
        class="form-control"
        placeholder="Search..."
      />
    </div>
  </div>
  <table class="table" id="list-item-3">
    <thead class="table table-dark">
      <tr>
        <th (click)="sortId()">Id</th>
        <th (click)="sortName()">Name</th>
        <th>Email</th>
        <th (click)="sortAge()">Age</th>
        <th>Address</th>
        <th>Gender</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody
      *ngFor="
        let u of user
          | paginate : { itemsPerPage: basicSelectedOption, currentPage: p }
      "
    >
      <tr>
        <td>{{ u.id }}</td>
        <td>{{ u.name }}</td>
        <td>{{ u.email }}</td>
        <td>{{ u.age }}</td>
        <td>{{ u.address }}</td>
        <td>{{ u.sex ? "Nam" : "Nữ" }}</td>
        <td>
          <button class="btn btn-danger" (click)="deleteUser(u.id)">
            <i class="fa-solid fa-trash"></i>
          </button>
          |
          <button class="btn btn-warning" (click)="editUser(u)">
            <i class="fa-sharp fa-solid fa-pen-to-square"></i>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
  <pagination-controls
    class="d-flex justify-content-end"
    (pageChange)="p = $event"
  ></pagination-controls>
</div>
